import {palette, pageination, callbacks, properties, Credentials} from "./common.slint";
import { LoginPage } from "login.slint";
import { SignUpPage } from "signup.slint";
import { Dashboard } from "dashboard.slint";
import { Button } from "std-widgets.slint";
import { leaderboard } from "leaderboards.slint";


export component AppWindow inherits Window {
    min-width: 480px;
    min-height: 480px;
    callback login <=> callbacks.request-login;
    callback createacc <=> callbacks.request-create-user;
    // should only be shown if sidebaractive is true
   main := HorizontalLayout {
        alignment: stretch;
        width: properties.sidebaractive ? 80% : 100%;
        x: sidebar.width;
        animate width { duration: 0ms; }
        if pageination.activepage == 0: Dashboard {
            visible: true;
        }
        if pageination.activepage == 1: test := SignUpPage {
            visible: true;
        }
        if pageination.activepage == 2: LoginPage {
            visible: true;
        }
        if pageination.activepage == 3: leaderboard {
            visible: true;
        }
        if pageination.activepage == 4: LoginPage {
            visible: true;
        }
    }

    //create a funtion to better swap page visually as to allow sidebar to be hidden or not
    sidebar := Rectangle {
        visible: properties.sidebartest ? true : false;
        x: 0px;
        y: 0px;
        width: properties.sidebaractive ? 20% : 0%;
        height: 100%;
        background: palette.background;
        padding: 0;
        sidebarbutton := Button {
            x: properties.sidebaractive ? sidebar.width - 35px : sidebar.width;
            y: 0px;
           // icon: properties.sidebaractive ? @image-url("C:/Users/teisb/desktop/TxP/h3-projektv2-24q2h3-gruppe3-txp/Frontend/user_interface/ui/assets/arrow-left.svg") : @image-url("C:/Users/teisb/desktop/TxP/h3-projektv2-24q2h3-gruppe3-txp/Frontend/user_interface/ui/assets/arrow-right.svg");
            clicked => {
                properties.sidebaractive = ! properties.sidebaractive;
            }
        }

        Rectangle {
            visible: properties.sidebaractive ? true : false;
            Text {
                text: "clickme";
                TouchArea {
                    width: 150%;
                    height: 150%;
                    clicked => {
                        pageination.activepage = 2;
                        properties.sidebartest = false;
                        properties.sidebaractive = false;
                    }
                }
            }
        }
        Rectangle {
            y:20px;
            visible: properties.sidebaractive ? true : false;
            Text {
                text: "highscore";
                TouchArea {
                    width: 150%;
                    height: 150%;
                    clicked => {
                        pageination.activepage = 3;
                        properties.sidebartest = false;
                        properties.sidebaractive = false;
                    }
                }
            }
    }
}
}
